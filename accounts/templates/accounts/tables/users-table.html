{% comment %}{% load accounts_filters %}{% endcomment %}

<div class="table-container">
    <table class="table table-striped table-bordered">
        <thead class="table-dark">
            <tr>
                <th scope="col">ID Number</th>
                <th scope="col">Username</th>
                <th scope="col">Actions</th>
                <th scope="col">Active</th>
                <th scope="col">More Info</th>
            </tr>
        </thead>
        <tbody>
            {% for user in users %}
                <tr>
                    <th class="align-middle" scope="row">
                        {{ user.user_id }}
                    </th>
                    <td class="align-middle">
                        {{ user.username }}
                    </td>
                    <td class="align-middle">
                        <a href="{% url 'update_account' user.id %}" class="btn btn-warning btn-sm">Edit</a>
                        {% comment %}<a href="{% url 'create_job_description' user.id %}" class="btn btn-info btn-sm">Add Job Description</a>{% endcomment %}
                    </td>
                    <td class="align-middle">
                        <div class="{{ user.username }}deactivate-user form-check form-switch">
                            {% include 'accounts/htmx/check-box.html' %}
                        </div>
                    </td>
                    <!-- Show Accordion items -->
                    <td class="align-middle text-primary" style="cursor:pointer;"
                    id="{{ user.id }}One" data-bs-toggle="collapse" data-bs-target="#{{ user.id }}" aria-expanded="false" aria-controls="{{ user.id }}">
                        More Info
                    </td>

                    <!-- Accordion items -->
                    <tr id="{{ user.id }}" class="accordion-collapse collapse" aria-labelledby="{{ user.id }}One" data-bs-parent="#accounts-table" style="">
                        <th class="align-middle table-warning" scope="col" colspan="2">First Name</th>
                        <td class="align-middle" colspan="2">{{ user.first_name }}</td>
                    </tr>
                    <tr id="{{ user.id }}" class="accordion-collapse collapse" aria-labelledby="{{ user.id }}One" data-bs-parent="#accounts-table" style="">
                        <th class="align-middle table-warning" scope="col" colspan="2">Last Name</th>
                        <td class="align-middle" colspan="3">{{ user.last_name }}</td>
                    </tr>
                    <tr id="{{ user.id }}" class="accordion-collapse collapse" aria-labelledby="{{ user.id }}One" data-bs-parent="#accounts-table" style="">
                        <th class="align-middle table-warning" scope="col" colspan="2">Location</th>
                        <td class="align-middle" colspan="2">{{ user.location }}</td>
                    </tr>
                    {% comment %}
                    <tr id="{{ user.id }}" class="accordion-collapse collapse" aria-labelledby="{{ user.id }}One" data-bs-parent="#accounts-table" style="">
                        <th class="align-middle table-warning" scope="col" colspan="2">Department</th>
                        <td class="align-middle" colspan="3">{{ user.id|get_department }}</td>
                    </tr>
                    <tr id="{{ user.id }}" class="accordion-collapse collapse" aria-labelledby="{{ user.id }}One" data-bs-parent="#accounts-table" style="">
                        <th class="align-middle table-warning" scope="col" colspan="2">Job Title</th>
                        <td class="align-middle" colspan="3">{{ user.id|get_job_title }}</td>
                    </tr>
                    <tr id="{{ user.id }}" class="accordion-collapse collapse" aria-labelledby="{{ user.id }}One" data-bs-parent="#accounts-table" style="">
                        <th class="align-middle table-warning" scope="col" colspan="3">Join Date</th>
                        <td class="align-middle" colspan="3">{{ user.id|get_date_joined }}</td>
                    </tr>
                    {% endcomment %}
                    <tr id="{{ user.id }}" class="accordion-collapse collapse" aria-labelledby="{{ user.id }}One" data-bs-parent="#accounts-table" style="">
                        <th class="align-middle table-warning" scope="col" colspan="2">Email</th>
                        <td class="align-middle" colspan="5">{{ user.email }}</td>
                    </tr>
                    <tr id="{{ user.id }}" class="accordion-collapse collapse" aria-labelledby="{{ user.id }}One" data-bs-parent="#accounts-table" style="">
                        <th class="align-middle table-warning" scope="col" colspan="2">Role/s</th>
                        <td class="align-middle" colspan="5">
                            {% for group in user.groups.all %}
                                {{ group }}
                            {% endfor %}
                        </td>
                    </tr>
                    <tr id="{{ user.id }}" class="accordion-collapse collapse" aria-labelledby="{{ user.id }}One" data-bs-parent="#accounts-table" style="">
                        <th class="align-middle table-warning" scope="col" colspan="2">Last Login</th>
                        <td class="align-middle" colspan="4">{{ user.last_login|date:"M/d" }}</td>
                    </tr>

                </tr>
                {% include 'accounts/htmx/user-modal.html' %}
            {% endfor %}
        </tbody>
    </table>
</div>